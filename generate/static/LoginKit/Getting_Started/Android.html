<!DOCTYPE html>

<!--[if lt IE 7]>       <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>          <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>          <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<title>Android - mStage.io</title>
<meta content="Documentation for UserKit and LoginKit SDK" name="description"/>
<meta content="I, Me &amp; Myself" name="author">
<meta charset="utf-8">
<link href="../../themes/daux/img/favicon-blue.png" rel="icon" type="image/x-icon">
<!-- Mobile -->
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<!-- Font -->
<link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700&amp;subset=latin,cyrillic-ext,cyrillic" rel="stylesheet" type="text/css">
<!-- CSS -->
<link href="../../themes/daux/css/theme-blue.min.css" rel="stylesheet" type="text/css">
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</link></link></meta></link></meta></meta></head>
<body class="">
<header class="Navbar hidden-print">
<a class="Navbar__brand" href="http://mstage.io">mStage.io</a>
<style>.s-content img {display: inline;}.Nav .Nav .Nav__item--active a {color: #004aff;} .Nav__item--active>a, .Nav__item--open>a {background-color: inherit;}ul.tab{list-style-type:none;margin:0;padding:0;overflow:hidden;border:0 solid #ccc;background-color:#f1f1f1}ul.tab li{float:left}ul.tab li a{display:inline-block;color:#000;text-align:center;padding:14px 16px;text-decoration:none;transition:.3s;font-size:17px}.tabcontent{display:none;margin:0;padding:0;border:0 solid #ccc;border:none}ul.tab li a:hover{background-color:#ddd}ul.tab li a:focus,.active{background-color:#ccc}.tabcontent{-webkit-animation:fadeEffect 1s;animation:fadeEffect 1s}@-webkit-keyframes fadeEffect{from{opacity:0}to{opacity:1}}@keyframes fadeEffect{from{opacity:0}to{opacity:1}}.s-content pre{background:#fbfbfb;padding:20px;margin:0}</style></header>
<div class="Columns content">
<aside class="Columns__left Collapsible">
<div class="Collapsible__container">
<button class="Button Collapsible__trigger" type="button">
<span class="Collapsible__trigger--bar"></span>
<span class="Collapsible__trigger--bar"></span>
<span class="Collapsible__trigger--bar"></span>
</button>
</div>
<div class="Collapsible__content">
<!-- Navigation -->
<ul class="Nav"><li class="Nav__item has-children"><a class="aj-nav folder" href="#"><i class="Nav__arrow"> </i>UserKit</a><ul class="Nav"><li class="Nav__item has-children"><a class="aj-nav folder" href="#"><i class="Nav__arrow"> </i>Getting Started</a><ul class="Nav"><li class="Nav__item "><a href="../../UserKit/Getting_Started/Android.html">Android</a></li><li class="Nav__item "><a href="../../UserKit/Getting_Started/IOS.html">IOS</a></li></ul></li></ul></li><li class="Nav__item Nav__item--open has-children"><a class="aj-nav folder" href="#"><i class="Nav__arrow"> </i>LoginKit</a><ul class="Nav"><li class="Nav__item Nav__item--open has-children"><a class="aj-nav folder" href="#"><i class="Nav__arrow"> </i>Getting Started</a><ul class="Nav"><li class="Nav__item Nav__item--active"><a href="../../LoginKit/Getting_Started/Android.html">Android</a></li><li class="Nav__item "><a href="../../LoginKit/Getting_Started/IOS.html">IOS</a></li></ul></li><li class="Nav__item "><a href="../../LoginKit/Authenticate.html">Authenticate</a></li><li class="Nav__item "><a href="../../LoginKit/Account_Manager.html">Account Manager</a></li><li class="Nav__item "><a href="../../LoginKit/Affilate_Partner.html">Affilate Partner</a></li></ul></li></ul>
<div class="Links">
<hr/>
<a href="/sdk-doc/generate/android-source" target="_blank">Android API Reference</a>
<br/>
<a href="/sdk-doc/generate/ios-source" target="_blank">IOS API Reference</a>
<br/>
<div class="CodeToggler">
<hr/>
<a class="CodeToggler__button CodeToggler__button--main" href="#">Show Code Blocks Inline</a><br>
</br></div>
</div>
</div>
</aside>
<div class="Columns__right ">
<div class="Columns__right__content">
<div class="doc_content">
<article class="Page">
<div class="Page__header">
<h1><a href="../../LoginKit/Authenticate.html">LoginKit</a> <svg class="Page__header--separator" viewbox="0 0 477.175 477.175" xmlns="http://www.w3.org/2000/svg"><path d="M360.73 229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1 0s-5.3 13.8 0 19.1l215.5 215.5-215.5 215.5c-5.3 5.3-5.3 13.8 0 19.1 2.6 2.6 6.1 4 9.5 4 3.4 0 6.9-1.3 9.5-4l225.1-225.1c5.3-5.2 5.3-13.8.1-19z"></path></svg> <a href="../../LoginKit/Getting_Started/Android.html">Getting Started</a> <svg class="Page__header--separator" viewbox="0 0 477.175 477.175" xmlns="http://www.w3.org/2000/svg"><path d="M360.73 229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1 0s-5.3 13.8 0 19.1l215.5 215.5-215.5 215.5c-5.3 5.3-5.3 13.8 0 19.1 2.6 2.6 6.1 4 9.5 4 3.4 0 6.9-1.3 9.5-4l225.1-225.1c5.3-5.2 5.3-13.8.1-19z"></path></svg> <a href="../../LoginKit/Getting_Started/Android.html">Android</a></h1>
<span style="float: left; font-size: 10px; color: gray;">
            Thursday, December 29, 2016 10:43 PM        </span>
<span style="float: right; font-size: 10px; color: gray;">
<a href="https://github.com/khang-nt/sdk-doc/blob/master/docs/01_LoginKit/00_Getting_Started/Android.md" target="_blank">Edit on GitHub</a>
</span>
</div>
<div class="s-content">
<br>
<center>
<a href="https://bintray.com/mstage/mStage-SDK/LoginKit-SDK/_latestVersion"><img src="https://api.bintray.com/packages/mstage/mStage-SDK/LoginKit-SDK/images/download.svg"/></a> <img src="https://circleci.com/gh/jupitervn/userKit-Android-SDK/tree/master.svg?style=shield&amp;circle-token=0cb9923a82f369171f87d827bbc497e11b495e6d"/>
</center>
<br>
<h1 id="page_Installation">Installation</h1>
<hr/>
<h4 id="page_Gradle">Gradle:</h4>
<pre><code>repositories {
    jcenter()
}
dependencies {
    compile 'com.mstage.userkit:identity:$latest_version$'
}
</code></pre>
<h4 id="page_AndroidManifestxml">AndroidManifest.xml</h4>
<pre><code class="language-xml">&lt;uses-permission android:name="android.permission.INTERNET"/&gt;

&lt;application
    android:name=".MainApplication"
    ...&gt;
    &lt;meta-data android:name="USER_KIT_API_TOKEN" android:value="your_api_token_here" /&gt;

&lt;/application&gt;
</code></pre>
<h4 id="page_Initialization">Initialization</h4>
<pre><code class="language-Java">public class MainApplication extends Application {
    @Override
    public void onCreate() {
        LoginKit.init(this);
        // Or LoginKit.init(Context, USER_KIT_API_TOKEN)
        // In case you haven't defined api token in AndroidManifest.xml
    }
}

</code></pre>
<h1 id="page_Basic_tutorials">Basic tutorials</h1>
<hr/>
<h2 id="page_Logging">Logging</h2>
<p>Logging is disabled by default. To show/hide logs of <code>LoginKit</code>, just add some lines to your code:</p>
<ul class='tab'>
<li><a href="javascript:void(0)" class="tablinks tl0 default_open" onclick="openTab(event, 'tc0', 'android0', 'tl0')">Android</a></li></ul>
<div id='android0' class='tabcontent tc0'>
<pre><code class="language-java">// import userkit.sdk.identity.Logging;
// show log
Logging.enable();
// hide log
Logging.disable();
</code></pre>
</div>

<h2 id="page_Java_concurrency_support_using_RxJava2">Java concurrency support using RxJava2:</h2>
<ul class='tab'>
<li><a href="javascript:void(0)" class="tablinks tl1 default_open" onclick="openTab(event, 'tc1', 'android1', 'tl1')">Android</a></li></ul>
<div id='android1' class='tabcontent tc1'>
<pre><code class="language-java">LoginKit.getInstance().resetPassword("hello@world.com")
        .subscribeOn(Schedulers.io())
        .observeOn(AndroidSchedulers.mainThread())
        .subscribe(() -&gt; Toast.makeText(this, "Reset password success", Toast.LENGTH_SHORT).show(),
            Throwable::printStackTrace);
</code></pre>
</div>

<h4 id="page_Note">Note:</h4>
<blockquote>
<p>This job won't run until you call <code>subscribe()</code>.</p>
</blockquote>
<p>If you want to run the request immediately and ignore the result, try it:</p>
<ul class='tab'>
<li><a href="javascript:void(0)" class="tablinks tl2 default_open" onclick="openTab(event, 'tc2', 'android2', 'tl2')">Android</a></li></ul>
<div id='android2' class='tabcontent tc2'>
<pre><code class="language-java">LoginKit.getInstance().resetPassword(email)
        .subscribeOn(Schedulers.io())
        .subscribe();
</code></pre>
</div>

<p>Read more about <a class="external" href="https://github.com/ReactiveX/RxJava/wiki"><code>RxJava</code></a>.</p>
<h2 id="page_Lambda_expression_friendly">Lambda expression friendly</h2>
<p>If you don't like <code>Observer</code> pattern, you can easily define callback functions
which was designed to friendly with Java 8 Lambda expression:</p>
<ul class='tab'>
<li><a href="javascript:void(0)" class="tablinks tl3 default_open" onclick="openTab(event, 'tc3', 'android3', 'tl3')">Android</a></li></ul>
<div id='android3' class='tabcontent tc3'>
<pre><code class="language-java">void doResetPassword(String email) {
    LoginKit.getInstance().resetPassword(email,
        () -&gt; Toast.makeText(this, "Reset password success", Toast.LENGTH_SHORT).show(),
        Throwable::printStackTrace);
}
</code></pre>
</div>

<h4 id="page_Notice_that">Notice that</h4>
<blockquote>
<p>This job will be scheduled to run in IO thread pool (<code>Schedulers.io()</code>), and will try to call back the consumer - <code>onSuccess</code> in the current thread (the thread call <code>resetPassword</code>), if can't, <code>onSuccess</code> will call back on <strong>main thread</strong>.</p>
</blockquote>
<p>And the same thing with all API has callback function.</p>
<h2 id="page_Handling_errors">Handling errors</h2>
<p>React with specific <code>Exception</code> case is one of the most important parts in programming.
<code>LoginKit</code> make it simply to handle, if the error encountered is:</p>
<ul>
<li>
<code>IdentityException</code>: you made a bad request.
You can print it into <code>Logcat</code> to get more detail. A convenient that you can know exactly
what sort of error occurred, using <code>IdentityException.getIdentityError</code>.</li>
<li>
<code>IOException</code>: maybe due to networking, the connection to server is broken during the request.</li>
<li>All other exceptions are of kind UNKNOWN, read the stack trace carefully.</li>
</ul>
<p>Assume that we are going to create new account with email and password,
there are some exceptions that we must handle, such as:</p>
<ul>
<li>Email is invalid or already exists.</li>
<li>Upload avatar failed due to networking.</li>
</ul>
<p>Now let see how we can handle it:</p>
<ul class='tab'>
<li><a href="javascript:void(0)" class="tablinks tl4 default_open" onclick="openTab(event, 'tc4', 'android4', 'tl4')">Android</a></li></ul>
<div id='android4' class='tabcontent tc4'>
<pre><code class="language-java">LoginKit.getInstance().signUpNewProfile("hello@world.com", "123abc", false, null,
        accountInfo -&gt; {
            Log.d(TAG, "Register account success: " + accountInfo);
        },
        error -&gt; {
            error.printStackTrace();
            if (error instanceOf IdentityException) {
                switch(((IdentityException) error).getIdentityError()) {
                    case EMAIL_EXIST:
                        Toast.makeText(this, "Email exist", Toast.LENGTH_SHORT).show();
                        break;
                    case INVALID_EMAIL_OR_PASSWORD:
                        Toast.makeText(this, "Invalid Email or Password", Toast.LENGTH_SHORT).show();
                        break;
                }
            } else if (error instanceOf IOException) {
                // A network error happened
            } else {
                throw Exceptions.propagate(error);
            }
        });
</code></pre>
</div>

</br></br></div>
<nav>
<ul class="Pager">
<li class="Pager--prev"><a href="../../UserKit/Getting_Started/IOS.html">Previous</a></li> <li class="Pager--next"><a href="../../LoginKit/Getting_Started/IOS.html">Next</a></li> </ul>
</nav>
</article>
</div>
</div>
</div>
</div>
<!-- jQuery -->
<script src="../../themes/daux/js/jquery-1.11.3.min.js"></script>
<!-- hightlight.js -->
<script src="../../themes/daux/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-- JS -->
<script src="../../themes/daux/js/daux.js"></script>
<script>function openTab(evt,tab_content,active_id,tab_links){var i,tabcontent,tablinks;tabcontent=document.getElementsByClassName(tab_content);for(i=0;i<tabcontent.length;i++){tabcontent[i].style.display='none'}tablinks=document.getElementsByClassName(tab_links);for(i=0;i<tablinks.length;i++){tablinks[i].className=tablinks[i].className.replace(' active','')}document.getElementById(active_id).style.display='block';evt.currentTarget.className+=' active'};for(default_open_list=document.getElementsByClassName('default_open'),i=0;i<default_open_list.length;i++)default_open_list[i].click();</script></body>
</html>
